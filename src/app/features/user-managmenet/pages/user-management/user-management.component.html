<div class="flex flex-col p-4">
  <div class="flex flex-row justify-between items-center gap-2">
    <p-iconfield dir="rtl" class="md:!w-[300px] !w-full">
      <p-inputicon class="pi pi-search" />
      <input type="text" pInputText placeholder="جست و جو" class="!w-full" (input)="onSearch($event)"/>
    </p-iconfield>
    <p-button label="افزودن کاربر" class="!w-[150px]" [fluid]="true" (onClick)="onAddUser()"/>
  </div>
  <p-divider/>
    <p-table
      [value]="users()"
      showGridlines
      dataKey="id" [rows]="10"
      [paginator]="true"
      scrollHeight="calc(100svh - 275px)"
    >
      <ng-template #header>
        <tr>
          <th>ردیف</th>
          <th>نام و نام خانوادگی</th>
          <th>نام کاربری</th>
          <th>نقش</th>
          <th>موبایل</th>
          <th>ایمیل</th>
          <th>وضعیت</th>
          <th>اقدامات</th>
        </tr>
      </ng-template>
      <ng-template #body let-user let-rowIndex="rowIndex">
        <tr>
          <td>{{ rowIndex + 1 }}</td>
          <td>{{ user.name }}</td>
          <td>{{ user.username }}</td>
          <td>{{ user.role }}</td>
          <td>{{ user.phoneNumber }}</td>
          <td>{{ user.email }}</td>
          <td>
            <p-tag [value]="user.status ? 'فعال' : 'غیرفعال'" [severity]="user.status ? 'success' : 'danger'" />
          </td>
          <td class="flex flex-row items-center justify-around">
            <p-button icon="pi pi-user-edit" [rounded]="true" [text]="true" severity="success" size="small" (click)="onEditUser(user)"/>
            <p-divider layout="vertical"/>
            <p-button icon="pi pi-user-minus" [rounded]="true" [text]="true" severity="danger" size="small" (click)="onDeleteUser($event, user)"/>
          </td>
        </tr>
      </ng-template>
    </p-table>
</div>
